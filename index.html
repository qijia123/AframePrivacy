<!DOCTYPE html>
<html>
  <head>
    <title>VR Experiment - Cube Moving with Joystick Movement and Rotation</title>

    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script>
      delete AFRAME.components["grabbable"];
    </script>
    <script src="https://cdn.jsdelivr.net/npm/super-hands@3.0.5/dist/super-hands.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@c-frame/aframe-physics-system@4.2.3/dist/aframe-physics-system.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-event-set-component@5.1.0/dist/aframe-event-set-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-physics-extras@0.1.3/dist/aframe-physics-extras.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-environment-component@1.5.0/dist/aframe-environment-component.min.js"></script>

    <script src="components/color-randomizer-component.js"></script>
    <script src="components/phase-shift-component.js"></script>
    <script src="components/joystick-movement-component.js"></script>
    <script src="components/joystick-rotation-component.js"></script>
    <script src="components/trial-manager-system.js"></script>
    <script src="components/disappear-on-touch.js"></script>
    

  </head>
  <body>
    <a-scene id="scene" physics environment="preset: forest; shadow: true" trial-manager>
      <a-assets>
        <img id="portals-preview" src="./hand-controls.jpg"></img>
        <img id="colortransform" src="./colortransform.png" />
        <a-mixin id="cube" geometry="primitive: box; width: 0.5; height: 0.5; depth: 0.5"
                 hoverable grabbable stretchable draggable
                 event-set__hoveron="_event: hover-start; material.opacity: 0.7; transparent: true"
                 event-set__hoveroff="_event: hover-end; material.opacity: 1; transparent: false"
                 dynamic-body shadow></a-mixin>
        <a-mixin id="target" color-randomizer droppable static-body
                 collision-filter="collisionForces: false"
                 event-set__dragon="_e5vent: dragover-start; material.wireframe: true"
                 event-set__dragoff="_event: dragover-end; material.wireframe: false"
                 geometry="primitive: box; width: 0.75; height: 0.75; depth: 0.75"
                 shadow></a-mixin>
        <a-mixin id="touch"
                 physics-collider phase-shift
                 collision-filter="collisionForces: false"
                 static-body="shape: sphere; sphereRadius: 0.02"
                 super-hands="colliderEvent: collisions;
                              colliderEventProperty: els;
                              colliderEndEvent: collisions;
                              colliderEndEventProperty: clearedEls;">
        </a-mixin>
      </a-assets>
      <a-entity id="rig" joystick-movement="speed: 1.5" joystick-rotation="speed: 60">
        <a-camera id="camera" positon="0 1.6 0"></a-camera>
        <a-entity id="rightHand" mixin="touch"
                  hand-controls="hand: right; handModelStyle: lowPoly">
        </a-entity>
        <a-entity id="leftHand" mixin="touch"
                  hand-controls="hand: left; handModelStyle: lowPoly">
        </a-entity>
      </a-entity>


      <!-- <a-entity class="cube" mixin="cube" position="0 1.6 -1.25" material="color: red"></a-entity> -->

      <!-- <a-entity class="target" mixin="target" position = "-1 1.6 -1"
                material="src:#colortransform" shadow></a-entity> -->
      
      <!-- ground collider keeps objets from falling -->
      <a-box static-body width="100" height="0.01" depth="100" visible="false"></a-box>

      <a-entity id="uiPanel" position="0 2.5 -1.5">
        <a-plane width="2" height="1" color="#333" opacity="0.7"></a-plane>
        <a-text id="uiText" value="" align="center" position="0 0 0.1" width="1.8"></a-text>
      </a-entity>

        <a-sphere position="-0.5 1.5 -0.5"
                radius="0.1"
                color="blue"
                dynamic-body="mass: 0"
                collision-filter="collisionForces: false"
                hoverable
                disappear-on-touch>
      </a-sphere>

      <a-sphere position="0.5 1.5 -0.5"
                radius="0.1"
                color="blue"
                dynamic-body="mass: 0"
                collision-filter="collisionForces: false"
                disappear-on-touch>
      </a-sphere>

     </body>
</html>

